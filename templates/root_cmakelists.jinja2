cmake_minimum_required(VERSION {{ cmake_minimum.major }}.{{ cmake_minimum.minor }})
project({{ project.name }} VERSION {{ project.version }} LANGUAGES C CXX ASM)

include(${CMAKE_CURRENT_SOURCE_DIR}/cmake/AddHierarchicalLibrary.cmake)

# Preset variables (set by CMakePresets) - reference to avoid "unused variable" warning
message(STATUS "Configuration: BOARD=${BOARD} SOC=${SOC} ISA_VARIANT=${ISA_VARIANT} BUILD_VARIANT=${BUILD_VARIANT}")

{% for entry in subdirs %}
{% if length(entry) > 1 and last(entry) %}
if({{ last(entry) }})
  add_subdirectory({{ first(entry) }})
endif()
{% else %}
add_subdirectory({{ first(entry) }})
{% endif %}
{% endfor %}
